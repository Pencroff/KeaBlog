<?xml version="1.0" encoding="utf-8"?>
<edmx:Edmx Version="2.0" xmlns:edmx="http://schemas.microsoft.com/ado/2008/10/edmx">
  <!-- EF Runtime content -->
  <edmx:Runtime>
    <!-- SSDL content -->
    <edmx:StorageModels>
    <Schema Namespace="KeaContext.Store" Alias="Self" Provider="System.Data.SqlClient" ProviderManifestToken="2008" xmlns:store="http://schemas.microsoft.com/ado/2007/12/edm/EntityStoreSchemaGenerator" xmlns="http://schemas.microsoft.com/ado/2009/02/edm/ssdl">
        <EntityContainer Name="KeaContextStoreContainer">
          <EntitySet Name="auth_Roles" EntityType="KeaContext.Store.auth_Roles" store:Type="Tables" Schema="dbo" />
          <EntitySet Name="auth_Users" EntityType="KeaContext.Store.auth_Users" store:Type="Tables" Schema="dbo" />
          <EntitySet Name="auth_UsersInRoles" EntityType="KeaContext.Store.auth_UsersInRoles" store:Type="Tables" Schema="dbo" />
          <EntitySet Name="Entries" EntityType="KeaContext.Store.Entries" store:Type="Tables" Schema="dbo" />
          <EntitySet Name="EntriesInTags" EntityType="KeaContext.Store.EntriesInTags" store:Type="Tables" Schema="dbo" />
          <EntitySet Name="Tags" EntityType="KeaContext.Store.Tags" store:Type="Tables" Schema="dbo" />
          <AssociationSet Name="FK_auth_UsersInRoles_Roles" Association="KeaContext.Store.FK_auth_UsersInRoles_Roles">
            <End Role="auth_Roles" EntitySet="auth_Roles" />
            <End Role="auth_UsersInRoles" EntitySet="auth_UsersInRoles" />
          </AssociationSet>
          <AssociationSet Name="FK_auth_UsersInRoles_Users" Association="KeaContext.Store.FK_auth_UsersInRoles_Users">
            <End Role="auth_Users" EntitySet="auth_Users" />
            <End Role="auth_UsersInRoles" EntitySet="auth_UsersInRoles" />
          </AssociationSet>
          <AssociationSet Name="FK_Entries_auth_Users" Association="KeaContext.Store.FK_Entries_auth_Users">
            <End Role="auth_Users" EntitySet="auth_Users" />
            <End Role="Entries" EntitySet="Entries" />
          </AssociationSet>
          <AssociationSet Name="FK_EntriesInTags_Entries" Association="KeaContext.Store.FK_EntriesInTags_Entries">
            <End Role="Entries" EntitySet="Entries" />
            <End Role="EntriesInTags" EntitySet="EntriesInTags" />
          </AssociationSet>
          <AssociationSet Name="FK_EntriesInTags_Tags" Association="KeaContext.Store.FK_EntriesInTags_Tags">
            <End Role="Tags" EntitySet="Tags" />
            <End Role="EntriesInTags" EntitySet="EntriesInTags" />
          </AssociationSet>
        </EntityContainer>
        <EntityType Name="auth_Roles">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Name="Id" Type="int" Nullable="false" StoreGeneratedPattern="Identity" />
          <Property Name="Role" Type="nvarchar" Nullable="false" MaxLength="32" />
        </EntityType>
        <EntityType Name="auth_Users">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Name="Id" Type="uniqueidentifier" Nullable="false" />
          <Property Name="Login" Type="nvarchar" Nullable="false" MaxLength="64" />
          <Property Name="PassHash" Type="nvarchar" Nullable="false" MaxLength="64" />
          <Property Name="PassSalt" Type="nvarchar" Nullable="false" MaxLength="16" />
          <Property Name="Name" Type="nvarchar" MaxLength="64" />
          <Property Name="Phone" Type="nvarchar" MaxLength="16" />
          <Property Name="Email" Type="nchar" MaxLength="128" />
          <Property Name="Address" Type="nvarchar" MaxLength="256" />
        </EntityType>
        <EntityType Name="auth_UsersInRoles">
          <Key>
            <PropertyRef Name="UserId" />
            <PropertyRef Name="RoleId" />
          </Key>
          <Property Name="UserId" Type="uniqueidentifier" Nullable="false" />
          <Property Name="RoleId" Type="int" Nullable="false" />
        </EntityType>
        <EntityType Name="Entries">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Name="Id" Type="int" Nullable="false" StoreGeneratedPattern="Identity" />
          <Property Name="Title" Type="nvarchar" Nullable="false" MaxLength="256" />
          <Property Name="EntryUrl" Type="nvarchar" Nullable="false" MaxLength="256" />
          <Property Name="AuthorId" Type="uniqueidentifier" />
          <Property Name="ShortContent" Type="nvarchar" Nullable="false" MaxLength="1024" />
          <Property Name="FullContent" Type="nvarchar(max)" Nullable="false" />
          <Property Name="Visible" Type="bit" Nullable="false" />
          <Property Name="Created" Type="datetime" Nullable="false" />
          <Property Name="Modified" Type="datetime" />
          <Property Name="SEOKeywords" Type="nvarchar" MaxLength="128" />
          <Property Name="SEODescription" Type="nvarchar" MaxLength="256" />
        </EntityType>
        <EntityType Name="EntriesInTags">
          <Key>
            <PropertyRef Name="EntryId" />
            <PropertyRef Name="TagId" />
          </Key>
          <Property Name="EntryId" Type="int" Nullable="false" />
          <Property Name="TagId" Type="int" Nullable="false" />
        </EntityType>
        <EntityType Name="Tags">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Name="Id" Type="int" Nullable="false" StoreGeneratedPattern="Identity" />
          <Property Name="Name" Type="nvarchar" Nullable="false" MaxLength="64" />
          <Property Name="Created" Type="datetime" Nullable="false" />
          <Property Name="Modified" Type="datetime" />
        </EntityType>
        <Association Name="FK_auth_UsersInRoles_Roles">
          <End Role="auth_Roles" Type="KeaContext.Store.auth_Roles" Multiplicity="1" />
          <End Role="auth_UsersInRoles" Type="KeaContext.Store.auth_UsersInRoles" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="auth_Roles">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="auth_UsersInRoles">
              <PropertyRef Name="RoleId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK_auth_UsersInRoles_Users">
          <End Role="auth_Users" Type="KeaContext.Store.auth_Users" Multiplicity="1" />
          <End Role="auth_UsersInRoles" Type="KeaContext.Store.auth_UsersInRoles" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="auth_Users">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="auth_UsersInRoles">
              <PropertyRef Name="UserId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK_Entries_auth_Users">
          <End Role="auth_Users" Type="KeaContext.Store.auth_Users" Multiplicity="0..1" />
          <End Role="Entries" Type="KeaContext.Store.Entries" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="auth_Users">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="Entries">
              <PropertyRef Name="AuthorId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK_EntriesInTags_Entries">
          <End Role="Entries" Type="KeaContext.Store.Entries" Multiplicity="1" />
          <End Role="EntriesInTags" Type="KeaContext.Store.EntriesInTags" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="Entries">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="EntriesInTags">
              <PropertyRef Name="EntryId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK_EntriesInTags_Tags">
          <End Role="Tags" Type="KeaContext.Store.Tags" Multiplicity="1" />
          <End Role="EntriesInTags" Type="KeaContext.Store.EntriesInTags" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="Tags">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="EntriesInTags">
              <PropertyRef Name="TagId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Function Name="sp_InsertEntries" Aggregate="false" BuiltIn="false" NiladicFunction="false" IsComposable="false" ParameterTypeSemantics="AllowImplicitConversion" Schema="dbo">
          <Parameter Name="title" Type="nvarchar" Mode="In" />
          <Parameter Name="entryUrl" Type="nvarchar" Mode="In" />
          <Parameter Name="authorId" Type="uniqueidentifier" Mode="In" />
          <Parameter Name="shortContent" Type="nvarchar" Mode="In" />
          <Parameter Name="fullContent" Type="nvarchar(max)" Mode="In" />
          <Parameter Name="visible" Type="bit" Mode="In" />
          <Parameter Name="created" Type="datetime" Mode="In" />
          <Parameter Name="modified" Type="datetime" Mode="In" />
          <Parameter Name="seoKeywords" Type="nvarchar" Mode="In" />
          <Parameter Name="seoDescription" Type="nvarchar" Mode="In" />
        </Function>
        <Function Name="sp_UserByLoginGet" Aggregate="false" BuiltIn="false" NiladicFunction="false" IsComposable="false" ParameterTypeSemantics="AllowImplicitConversion" Schema="dbo">
          <Parameter Name="login" Type="nvarchar" Mode="In" />
        </Function>
        <Function Name="sp_UserRolesGet" Aggregate="false" BuiltIn="false" NiladicFunction="false" IsComposable="false" ParameterTypeSemantics="AllowImplicitConversion" Schema="dbo">
          <Parameter Name="login" Type="nvarchar" Mode="In" />
        </Function>
      </Schema></edmx:StorageModels>
    <!-- CSDL content -->
    <edmx:ConceptualModels>
      <Schema Namespace="KeaDAL" Alias="Self" xmlns:annotation="http://schemas.microsoft.com/ado/2009/02/edm/annotation" xmlns="http://schemas.microsoft.com/ado/2008/09/edm">
        <EntityContainer Name="KeaContext" annotation:LazyLoadingEnabled="false">
          <EntitySet Name="auth_Roles" EntityType="KeaDAL.auth_Roles" />
          <EntitySet Name="auth_Users" EntityType="KeaDAL.auth_Users" />
          <EntitySet Name="Entries" EntityType="KeaDAL.Entry" />
          <EntitySet Name="Tags" EntityType="KeaDAL.Tag" />
          <AssociationSet Name="auth_UsersInRoles" Association="KeaDAL.auth_UsersInRoles">
            <End Role="auth_Roles" EntitySet="auth_Roles" />
            <End Role="auth_Users" EntitySet="auth_Users" />
          </AssociationSet>
          <AssociationSet Name="FK_Entries_auth_Users" Association="KeaDAL.FK_Entries_auth_Users">
            <End Role="auth_Users" EntitySet="auth_Users" />
            <End Role="Entry" EntitySet="Entries" />
          </AssociationSet>
          <AssociationSet Name="EntriesInTags" Association="KeaDAL.EntriesInTags">
            <End Role="Entry" EntitySet="Entries" />
            <End Role="Tag" EntitySet="Tags" />
          </AssociationSet>
          <FunctionImport Name="sp_InsertEntries">
            <Parameter Name="title" Mode="In" Type="String" />
            <Parameter Name="entryUrl" Mode="In" Type="String" />
            <Parameter Name="authorId" Mode="In" Type="Guid" />
            <Parameter Name="shortContent" Mode="In" Type="String" />
            <Parameter Name="fullContent" Mode="In" Type="String" />
            <Parameter Name="visible" Mode="In" Type="Boolean" />
            <Parameter Name="created" Mode="In" Type="DateTime" />
            <Parameter Name="modified" Mode="In" Type="DateTime" />
            <Parameter Name="seoKeywords" Mode="In" Type="String" />
            <Parameter Name="seoDescription" Mode="In" Type="String" />
          </FunctionImport>
          <FunctionImport Name="sp_UserRolesGet" ReturnType="Collection(String)">
            <Parameter Name="login" Mode="In" Type="String" />
          </FunctionImport>
          <FunctionImport Name="sp_UserByLoginGet" EntitySet="auth_Users" ReturnType="Collection(KeaDAL.auth_Users)">
            <Parameter Name="login" Mode="In" Type="String" />
          </FunctionImport>
        </EntityContainer>
        <EntityType Name="auth_Roles">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Name="Id" Type="Int32" Nullable="false" annotation:StoreGeneratedPattern="Identity" />
          <Property Name="Role" Type="String" Nullable="false" MaxLength="32" Unicode="true" FixedLength="false" />
          <NavigationProperty Name="auth_Users" Relationship="KeaDAL.auth_UsersInRoles" FromRole="auth_Roles" ToRole="auth_Users" />
        </EntityType>
        <EntityType Name="auth_Users">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Name="Id" Type="Guid" Nullable="false" />
          <Property Name="Login" Type="String" Nullable="false" MaxLength="64" Unicode="true" FixedLength="false" />
          <Property Name="PassHash" Type="String" Nullable="false" MaxLength="64" Unicode="true" FixedLength="false" />
          <Property Name="PassSalt" Type="String" Nullable="false" MaxLength="16" Unicode="true" FixedLength="false" />
          <Property Name="Name" Type="String" MaxLength="64" Unicode="true" FixedLength="false" />
          <Property Name="Phone" Type="String" MaxLength="16" Unicode="true" FixedLength="false" />
          <Property Name="Email" Type="String" MaxLength="128" Unicode="true" FixedLength="true" />
          <Property Name="Address" Type="String" MaxLength="256" Unicode="true" FixedLength="false" />
          <NavigationProperty Name="auth_Roles" Relationship="KeaDAL.auth_UsersInRoles" FromRole="auth_Users" ToRole="auth_Roles" />
          <NavigationProperty Name="Entries" Relationship="KeaDAL.FK_Entries_auth_Users" FromRole="auth_Users" ToRole="Entry" />
        </EntityType>
        <EntityType Name="Entry">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Name="Id" Type="Int32" Nullable="false" annotation:StoreGeneratedPattern="Identity" />
          <Property Name="Title" Type="String" Nullable="false" MaxLength="256" Unicode="true" FixedLength="false" />
          <Property Name="EntryUrl" Type="String" Nullable="false" MaxLength="256" Unicode="true" FixedLength="false" />
          <Property Name="AuthorId" Type="Guid" />
          <Property Name="ShortContent" Type="String" Nullable="false" MaxLength="1024" Unicode="true" FixedLength="false" />
          <Property Name="FullContent" Type="String" Nullable="false" MaxLength="Max" Unicode="true" FixedLength="false" />
          <Property Name="Visible" Type="Boolean" Nullable="false" />
          <Property Name="Created" Type="DateTime" Nullable="false" />
          <Property Name="Modified" Type="DateTime" />
          <Property Name="SEOKeywords" Type="String" MaxLength="128" Unicode="true" FixedLength="false" />
          <Property Name="SEODescription" Type="String" MaxLength="256" Unicode="true" FixedLength="false" />
          <NavigationProperty Name="auth_Users" Relationship="KeaDAL.FK_Entries_auth_Users" FromRole="Entry" ToRole="auth_Users" />
          <NavigationProperty Name="Tags" Relationship="KeaDAL.EntriesInTags" FromRole="Entry" ToRole="Tag" />
        </EntityType>
        <EntityType Name="Tag">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Name="Id" Type="Int32" Nullable="false" />
          <Property Name="Name" Type="String" Nullable="false" MaxLength="64" Unicode="true" FixedLength="false" />
          <Property Name="Created" Type="DateTime" Nullable="false" />
          <Property Name="Modified" Type="DateTime" />
          <NavigationProperty Name="Entries" Relationship="KeaDAL.EntriesInTags" FromRole="Tag" ToRole="Entry" />
        </EntityType>
        <Association Name="auth_UsersInRoles">
          <End Role="auth_Roles" Type="KeaDAL.auth_Roles" Multiplicity="*" />
          <End Role="auth_Users" Type="KeaDAL.auth_Users" Multiplicity="*" />
        </Association>
        <Association Name="FK_Entries_auth_Users">
          <End Type="KeaDAL.auth_Users" Role="auth_Users" Multiplicity="0..1" />
          <End Type="KeaDAL.Entry" Role="Entry" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="auth_Users">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="Entry">
              <PropertyRef Name="AuthorId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="EntriesInTags">
          <End Type="KeaDAL.Entry" Role="Entry" Multiplicity="*" />
          <End Type="KeaDAL.Tag" Role="Tag" Multiplicity="*" />
        </Association>
      </Schema>
    </edmx:ConceptualModels>
    <!-- C-S mapping content -->
    <edmx:Mappings>
      <Mapping Space="C-S" xmlns="http://schemas.microsoft.com/ado/2008/09/mapping/cs">
        <EntityContainerMapping StorageEntityContainer="KeaContextStoreContainer" CdmEntityContainer="KeaContext">
          <EntitySetMapping Name="auth_Roles">
            <EntityTypeMapping TypeName="KeaDAL.auth_Roles">
              <MappingFragment StoreEntitySet="auth_Roles">
                <ScalarProperty Name="Id" ColumnName="Id" />
                <ScalarProperty Name="Role" ColumnName="Role" />
              </MappingFragment>
            </EntityTypeMapping>
          </EntitySetMapping>
          <EntitySetMapping Name="auth_Users">
            <EntityTypeMapping TypeName="KeaDAL.auth_Users">
              <MappingFragment StoreEntitySet="auth_Users">
                <ScalarProperty Name="Id" ColumnName="Id" />
                <ScalarProperty Name="Login" ColumnName="Login" />
                <ScalarProperty Name="PassHash" ColumnName="PassHash" />
                <ScalarProperty Name="PassSalt" ColumnName="PassSalt" />
                <ScalarProperty Name="Name" ColumnName="Name" />
                <ScalarProperty Name="Phone" ColumnName="Phone" />
                <ScalarProperty Name="Email" ColumnName="Email" />
                <ScalarProperty Name="Address" ColumnName="Address" />
              </MappingFragment>
            </EntityTypeMapping>
          </EntitySetMapping>
          <EntitySetMapping Name="Entries">
            <EntityTypeMapping TypeName="KeaDAL.Entry">
              <MappingFragment StoreEntitySet="Entries">
                <ScalarProperty Name="Id" ColumnName="Id" />
                <ScalarProperty Name="Title" ColumnName="Title" />
                <ScalarProperty Name="EntryUrl" ColumnName="EntryUrl" />
                <ScalarProperty Name="AuthorId" ColumnName="AuthorId" />
                <ScalarProperty Name="ShortContent" ColumnName="ShortContent" />
                <ScalarProperty Name="FullContent" ColumnName="FullContent" />
                <ScalarProperty Name="Visible" ColumnName="Visible" />
                <ScalarProperty Name="Created" ColumnName="Created" />
                <ScalarProperty Name="Modified" ColumnName="Modified" />
                <ScalarProperty Name="SEOKeywords" ColumnName="SEOKeywords" />
                <ScalarProperty Name="SEODescription" ColumnName="SEODescription" />
              </MappingFragment>
            </EntityTypeMapping>
          </EntitySetMapping>
          <EntitySetMapping Name="Tags">
            <EntityTypeMapping TypeName="KeaDAL.Tag">
              <MappingFragment StoreEntitySet="Tags">
                <ScalarProperty Name="Id" ColumnName="Id" />
                <ScalarProperty Name="Name" ColumnName="Name" />
                <ScalarProperty Name="Created" ColumnName="Created" />
                <ScalarProperty Name="Modified" ColumnName="Modified" />
              </MappingFragment>
            </EntityTypeMapping>
          </EntitySetMapping>
          <AssociationSetMapping Name="auth_UsersInRoles" TypeName="KeaDAL.auth_UsersInRoles" StoreEntitySet="auth_UsersInRoles">
            <EndProperty Name="auth_Roles">
              <ScalarProperty Name="Id" ColumnName="RoleId" />
            </EndProperty>
            <EndProperty Name="auth_Users">
              <ScalarProperty Name="Id" ColumnName="UserId" />
            </EndProperty>
          </AssociationSetMapping>
          <AssociationSetMapping Name="EntriesInTags" TypeName="KeaDAL.EntriesInTags" StoreEntitySet="EntriesInTags">
            <EndProperty Name="Tag">
              <ScalarProperty Name="Id" ColumnName="TagId" />
            </EndProperty>
            <EndProperty Name="Entry">
              <ScalarProperty Name="Id" ColumnName="EntryId" />
            </EndProperty>
          </AssociationSetMapping>
          <FunctionImportMapping FunctionImportName="sp_InsertEntries" FunctionName="KeaContext.Store.sp_InsertEntries" />
          <FunctionImportMapping FunctionImportName="sp_UserRolesGet" FunctionName="KeaContext.Store.sp_UserRolesGet" />
          <FunctionImportMapping FunctionImportName="sp_UserByLoginGet" FunctionName="KeaContext.Store.sp_UserByLoginGet" />
        </EntityContainerMapping>
      </Mapping>
    </edmx:Mappings>
  </edmx:Runtime>
  <!-- EF Designer content (DO NOT EDIT MANUALLY BELOW HERE) -->
  <Designer xmlns="http://schemas.microsoft.com/ado/2008/10/edmx">
    <Connection>
      <DesignerInfoPropertySet>
        <DesignerProperty Name="MetadataArtifactProcessing" Value="EmbedInOutputAssembly" />
      </DesignerInfoPropertySet>
    </Connection>
    <Options>
      <DesignerInfoPropertySet>
        <DesignerProperty Name="ValidateOnBuild" Value="true" />
        <DesignerProperty Name="EnablePluralization" Value="True" />
        <DesignerProperty Name="IncludeForeignKeysInModel" Value="True" />
        <DesignerProperty Name="CodeGenerationStrategy" Value="None" />
      </DesignerInfoPropertySet>
    </Options>
    <!-- Diagram content (shape and connector positions) -->
    <Diagrams>
      <Diagram Name="KeaModel">
        <EntityTypeShape EntityType="KeaDAL.auth_Roles" Width="1.5" PointX="0.75" PointY="1.5" Height="1.4033821614583331" IsExpanded="true" />
        <EntityTypeShape EntityType="KeaDAL.auth_Users" Width="1.5" PointX="3" PointY="1" Height="2.7494921874999996" IsExpanded="true" />
        <EntityTypeShape EntityType="KeaDAL.Entry" Width="1.5" PointX="5.875" PointY="3" Height="3.5186979166666656" IsExpanded="true" />
        <EntityTypeShape EntityType="KeaDAL.Tag" Width="1.5" PointX="8.75" PointY="2.875" Height="1.9802864583333335" IsExpanded="true" />
        <AssociationConnector Association="KeaDAL.auth_UsersInRoles" ManuallyRouted="false">
          <ConnectorPoint PointX="2.25" PointY="2.2016910807291667" />
          <ConnectorPoint PointX="3" PointY="2.2016910807291667" />
        </AssociationConnector>
        <AssociationConnector Association="KeaDAL.FK_Entries_auth_Users" >
          <ConnectorPoint PointX="4.5" PointY="3.4708968098958328" />
          <ConnectorPoint PointX="5.875" PointY="3.4708968098958328" />
        </AssociationConnector>
        <AssociationConnector Association="KeaDAL.EntriesInTags" >
          <ConnectorPoint PointX="7.375" PointY="3.9276432291666667" />
          <ConnectorPoint PointX="8.75" PointY="3.9276432291666667" />
        </AssociationConnector>
      </Diagram>
    </Diagrams>
  </Designer>
</edmx:Edmx>